\usepackage{todonotes}

\usepackage{bold-extra}

\usepackage{glossaries}
\glsdisablehyper

\usepackage{indentfirst}

\usepackage{tikz}

\usepackage{lib/minted}
\usemintedstyle{bw}
\newminted{factor}{gobble=4,frame=single}
\newmint{factor}{}

%TODO figure out the "right" way to do terminology typesetting
\newcommand{\term}[1]{\emph{#1}}

\newcommand{\inputfig}[1]{
  \begin{figure}
    \input{fig/#1}
    \label{fig:#1}
  \end{figure}
}

\newcommand{\inputlst}[2][tbp]{
  \begin{figure}[#1]
    \input{lst/#2}
    \label{lst:#2}
  \end{figure}
}

\usepackage{array}
\newcolumntype{k}[1]{|>{\centering\arraybackslash\hspace{0pt}}p{#1}|}

\usepackage{varioref}
\usepackage{hyperref}
\usepackage[capitalise]{cleveref}
\def\reftextcurrent{\unskip}
\crefname{figure}{Figure}{Figures}
\crefname{subfigure}{Figure}{Figures}

\usepackage{graphicx}
\newcommand{\whenNewer}[3]{%
  \ifnum\pdfstrcmp{\pdffilemoddate{#1}}%
  {\pdffilemoddate{#2}}>0%
  {\immediate\write18{#3}}\fi%
}
\newcommand{\includesvg}[2][]{%
  \whenNewer{#2.svg}{#2.pdf}%
    {inkscape -z -D --file=#2.svg --export-pdf=#2.pdf}%
  \includegraphics[#1]{#2.pdf}%
}

\usepackage{amsmath,amssymb}
\allowdisplaybreaks[1]
\newcommand{\vn}[1]{\ensuremath{\langle\texttt{#1}\rangle}}
\newcommand{\mem}[1]{\ensuremath{\textsc{reg}[\texttt{#1}]}}

\usepackage{longtable,booktabs}

\usepackage[
  style=authoryear,
  sortcites=true, % not that I care a whole lot
  %backref=true,
  abbreviate=false,
  alldates=long,
  dateabbrev=false,
  maxbibnames=5,
  url=true,
  doi=false,
  firstinits=true,
  dashed=false,
  uniquename=init
]{biblatex}

\DeclareNameAlias{sortname}{last-first}

\renewbibmacro*{date+extrayear}{%
  \iffieldundef{year}
    {}
    {\printtext{%
   \addperiod\space\printfield{labelyear}%
   \printfield{extrayear}}}}

\renewcommand*{\mkbibparens}[1]{%
  {\ifcitation{\bibleftbracket#1\bibrightbracket}%
              {\bibleftparen#1\bibrightparen}}%
}

\renewcommand*{\bibopenparen}[1]{%
  {\ifcitation{\bibleftbracket#1}{\bibleftparen#1}}%
}

\renewcommand*{\bibcloseparen}{%
  {\ifcitation{\bibrightbracket}{\bibrightparen}}%
}

\renewcommand{\contentsname}{Table of Contents}

\defbibheading{bibliography}{\bibsection}

\addbibresource{thesis.bib}

\setpnumwidth{2em}
\setrmarg{3em}

\overfullrule=1mm %XXX
